#!/usr/bin/env ruby

root = File.expand_path('../../lib', __FILE__)
$LOAD_PATH.unshift(root) unless $LOAD_PATH.include?(root)

require 'welaika_suspenders/generators/app_generator'
require 'welaika_suspenders/actions'
require 'welaika_suspenders/app_builder'
require 'welaika_suspenders/version_check'

if ['create', '--create'].include? ARGV[0]
  ARGV.shift
  puts "[WARNING] the welaika-suspenders create argument is deprecated. Just use `suspenders #{ARGV.join}` instead"
end

templates_root = File.expand_path(File.join("..", "templates"), File.dirname(__FILE__))
WelaikaSuspenders::AppGenerator.source_root templates_root
WelaikaSuspenders::AppGenerator.source_paths << Rails::Generators::AppGenerator.source_root << templates_root

WelaikaSuspenders::VersionCheck.check_if_up_to_date!
WelaikaSuspenders::AppGenerator.start
